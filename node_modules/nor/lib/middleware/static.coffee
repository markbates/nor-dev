path = require 'path'
fs = require 'fs'
sys = require 'sys'

class Nor.Middleware.Static
    
  @process: (env) ->
    if (/\/stylesheets\/.+/).test env.url
      f = "#{Nor.Application.root}/public#{env.url}"
      if path.existsSync(f)
        env.res.write(fs.readFileSync(f, 'utf-8'))
        env.finalized = true
    return env
    
Nor.Middleware._list.push () ->
  Nor.Middleware.Static